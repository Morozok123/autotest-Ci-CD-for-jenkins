node('unix') {
    agent {
            label 'unix'
        }

        parameters {
            choice(
                name: 'BROWSER',
                choices: ['chrome', 'firefox'],
                description: 'Select browser for tests'
            )
        }
    stage('Git checkout') {
        checkout scm
    }
    stage('Maven operations') {
        withMaven(globalMavenSettingsConfig: '', jdk: '', maven: 'Default', mavenSettingsConfig: '', traceability: true) {
        sh 'mvn clean test -Dtype.browser=${browser}'
        sh 'mvn allure:report'
        }
    }
    stage('Allure report') {
        allure includeProperties: false, jdk: '', results: [[path: 'target/allure-results']]
    }
}
